[https://app.planitpoker.com/room/xteN7A4ehw6RBqQSR0XOqurpoYcaCrsd](https://app.planitpoker.com/room/GehvOn5PIJ0d1FGcPTu6r56EaSKUIPuE)

“[역할/사용자]으로서 [행동/목표]을 하고 싶다, 그래서 [가치/이유]를 얻는다.”

스프린트 Velocity 12점 : 간단한 CRUD

웹1명 + 앱1명 + 백엔드1명 가 다 달라붙어서 1주일 (api 5~6개) + UI (3~4개)

## 마일스톤

- 선호운동
    - 백엔드 : 12/10
    - 클라이언트 : 12/11
- 매칭 필터링
    - 백엔드 : 12/16
    - 클라이언트 : 12/16
- 채팅 고도화
    - 백엔드 : 12/16
    - 클라이언트 : 12/16
- 태블로 대시보드 구축
    - 데이터 분석 : 12/16

### 유저 스토리 :

### 스프린트 Velocity  : 40점

학습이 필요없는 단순한 기능 CRUD 개발 기준 : 12점 (웹+앱+백)

### 1. 운동 메이트를 찾는 유저로서 다른 회원의 프로필에서 회원의 선호 운동을 확인하고 싶다. 그래서 나와 같은 종목을 즐기는 파트너를 찾고 싶다. (5)

- 개발 및 학습 목록
    - 백엔드
    1. 선호운동 종류/목록 조회 PR
    2. 선호 운동 리스트 추가 POST
        1. 선호운동 선택 최소개수1개
        2. 최대 5개 까지만 입력받기
    3. 선호 운동 리스트 수정 PATCH
        1. 수정할 선호운동 리스트
        2. 날짜, 수준
    4. 선호 운동 리스트 삭제 DELETE
        1. 논리적 삭제
        2. 리스트로 삭제
    - 클라이언트
        - API 연결

### **2. 운동 파트너를 찾는 유저로서 성별, 나이, 종목 등 구체적인 조건으로 필터링을 하고 싶다. 그래서 지도에서 나와 조건이 맞지 않는 사람을 일일이 확인하는 수고를 덜고, 딱 맞는 후보군만 볼 수 있다. (10)**

- 개발 및 학습 목록
    1. **사용자 검색 (필터링 적용) (10)**<<< 비관적 목표
    - Backend
        - GET /api/v1/members
        - **Query Params:**
            - lat, lng: 내 중심 좌표
            - radius: 검색 반경 (예: 5km)
            - gender: (String) M/F/ALL (U 포함)
            - ageRange: (String) 20s, 30s...
            - preferredExercise: (List) [Soccer, Gym...]
            - skillLevel: (String) Beginner/Intermediate/Expert … 6단계
            - daysOfWeek: (List) [Mon, Wed, Fri]
            - exerciseScore: 0~100
        - **Response:** 사용자 리스트 (좌표 포함)
    - 클라이언트
        - 매칭 지도에서 필터 추가
        - 필터에 맞게 타회원 마커 표시 (클러스터링 포함)
        
        ![image.png](attachment:966d2461-a5a1-4008-8ad1-5675227f25ad:image.png)
        
    1. **동네 인증 요청 <<< 낙관적 목표**
    - POST /api/v1/location/verify
    - **Body:** { "latitude": 37.xxx, "longitude": 127.xxx, “name”: “집” }
    - **Response:**
        - success: true/false
        - name: "집"
        - verifiedAt: Timestamp
    1. **채팅방 생성 요청**
    - POST /api/v1/chat-rooms
    - **Body:** { "receiverId": "75fb4dd7-b177-48eb-b936-c27d50273cd7”}
    - **Logic:** 서버 내부에서 요청자의 isVerified 상태와 두 유저 간의 거리를 계산하여 허용 여부 결정.

### 3. **채팅 사용자로서 채팅방에 들어왔을 때 대화 내용을 실시간으로 확인하고 싶다. 그래서 별도의 로딩 기다림 없이 바로 대화를 이어가는 가치를 얻는다. (13)**

- 개발 및 학습 목록
    
    기존 API 중 해당 API를 제외한 나머지 API 삭제
    
    - POST /api/chatrooms
    설명: 1:1 채팅방 생성 또는 조회.
    반환: chatroomId.
    - GET /api/chatrooms (폴링 유지)
    설명: 내 채팅방 목록 조회.
    사용시점: 채팅 탭 진입 시.
    - PATCH /api/chatrooms/{id}/leave
    설명: 채팅방 나가기.
    동작: DB 상태 변경.
    
    7.1 메시지 구조
    클라이언트와 서버가 주고받는 JSON 포맷 예시이다.
    {
    "type": "TALK",
    "chatroomId": 100,
    "senderId": "uuid",
    "content": "안녕하세요",
    "lastChatId": 150
    }
    
    A. 연결 및 초기화
    
    1. Client: ws://host/ws/chat?chatroomId=100 연결 요청.
    2. Server: 세션을 메모리에 등록하고, 즉시 DB에서 해당 방의 최신 메시지 30개를 조회하여 Client에게 전송.
    
    B. 과거 내역 더보기
    
    1. Client: 스크롤이 상단에 도달하면 type을 MORE, lastChatId를 현재 가장 오래된 메시지 ID로 설정하여 전송.
    2. Server: DB에서 해당 ID보다 이전 메시지 30개를 조회하여 요청한 Client에게만 전송.
    
    C. 메시지 전송 (차단 로직 포함) <<< 백엔드 비관적 로직 (차단 없이)
    
    1. Client: type을 TALK로 하여 메시지 전송.
    2. Server:
        - [검증] 해당 채팅방의 상대방이 보낸 사람(sender)을 차단했는지 blocks 테이블 조회.
        - [Case 1: 차단됨] DB 저장 안 함. 상대에게 전송 안 함. 보낸 사람에게 type: ERROR 메시지 전송.
        - [Case 2: 정상] DB chats 테이블에 저장하고, 메모리에서 상대방 세션을 찾아 실시간 전송.

### 4. 데이터 분석가로서 GA4와 DB 데이터를 결합하여 유입(Acquisition)부터 추천(Referral)까지의 전체 전환율을 표현하는 태블로 대시보드를 구축하고 싶다. (8)

- 개발 및 학습 목록
    1. 이력서들 조사해서 필수스택 조사하기 
    2. GA4 ↔ BigQuery 간 연결
    3. RDS ↔ BigQuery(MySQL) 간 연결
        1. 원시 데이터 분석
            1. 선호 운동 별 코호트 분석 
            2. AARRR 퍼널 분석
    4. GA4 ↔ Tableau 간 연결
    5. 블로그에 정리하기

### 5. 마케팅

- 개발 및 학습 목록
    1. SNS 계정 만들고 인스타에 띄우기 — 완전 가능 대신에 업로드할 내용 // 디자인
        
        → 운다방 계정으로 진행 (구글계정)
        
        → 쓰레드도 진행
        
    2. 지인들에게 소개하기 — 각자 가능
        1. 아파트 커뮤니티 헬스장 (상주하는 트레이너분한테 소개)
        2. 주변 지인(헬스장 사장) 홍보?
    3. 당근마켓에 운동하자는 글이 많이 올라옴 (각자 사는 지역에) → 친구한테 부탁가능
        
        → 당근 마켓에 홍보글 올리기
        
    4. 인터넷 커뮤니티 홍보 (각종 커뮤니티 가능) 

### 6. PWA 서비스워커 리팩토링, 로그인시 PLATFORM, ACCESS_MODE 붙이기 (4)
