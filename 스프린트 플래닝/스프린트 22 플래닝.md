[https://app.planitpoker.com/room/xteN7A4ehw6RBqQSR0XOqurpoYcaCrsd](https://app.planitpoker.com/room/GehvOn5PIJ0d1FGcPTu6r56EaSKUIPuE)

“[역할/사용자]으로서 [행동/목표]을 하고 싶다, 그래서 [가치/이유]를 얻는다.”

스프린트 Velocity 12점 : 간단한 CRUD

웹1명 + 앱1명 + 백엔드1명 가 다 달라붙어서 1주일 (api 5~6개) + UI (3~4개)

## 마일스톤

- 웹소켓 채팅서버 개선
    - 백엔드 : 1/13
    - 클라이언트 : 1/16
- 채팅 요청 범위 제한
    - 백엔드 : 1/20
    - 클라이언트 : 1/20
- 매칭 필터링
    - 백엔드 : 1/20
    - 클라이언트 : 1/20
- 마케팅
    - 클라이언트 : 1/12
- 운동기록 리팩토링
    - 클라이언트 : 1/15

### 유저 스토리 :

### 스프린트 Velocity  : 27점

학습이 필요없는 단순한 기능 CRUD 개발 기준 : 12점 (웹+앱+백)

### 1. 웹소켓 채팅서버 개선(5)

- 실시간 상대가 나간 경우
- 실시간 상대가 차단한 경우
- 마이페이지 조회시 삭제된 선호운동이 보이는 이슈 해결

### **2. 운동 파트너를 찾는 유저로서 성별, 나이, 종목 등 구체적인 조건으로 필터링을 하고 싶다. 그래서 지도에서 나와 조건이 맞지 않는 사람을 일일이 확인하는 수고를 덜고, 딱 맞는 후보군만 볼 수 있다. (10)**

- 개발 및 학습 목록
    1. **사용자 검색 (필터링 적용)** 
    - 백엔드
        - GET /api/v1/members
            - 화면 기준 viewPort 범위 지도 좌표 받아서 해당 범위 내의 회원과 운동장소 검색
                - 왼쪽위, 오른쪽 아래 좌표
            - **Response:**  운동 점수, 선호 운동 종류, 선호운동 날짜, 선호운동 숙련도 추가
                
                ![image.png](attachment:73f8654c-67f1-4c90-810d-a4128914333e:image.png)
                
    - 안드로이드
        - 캐싱 && 좌표 이동에 따라 api 재호출할지 결정
        - 쓰로틀링
        - 필터에 맞게 타회원 마커 표시
            - 선호운동 종류/숙련도, 운동 점수, 요일 필터링 로직 추가
            - 현재는 성별, 나이만 적용
    - 프론트
        - ~~좌표이동이 따른 API 재호출~~
        - 쓰로틀링
        - 필터링 로직 작성
        - 캐싱

### **3. 운동파트너와 채팅을 하고싶은 유저로서 내 근처의 유저만 채팅을 하고싶다. 그래서 실제 같이 운동할 수 있는 위치의 유저와만 채팅을 할 수 있다. (4)**

- 백엔드
    - POST /api/v1/chat-rooms
    - **Body:** receiverId + latitude + longitude
    - **Logic:** 서버 내부에서 상대방의 운동 장소와 현재 회원의 위치 거리 비교.
- 클라이언트
    - 최초 접근 시 온보딩 화면
        - 근처의 운동 메이트에게만 매칭 신청(채팅방 생성)할 수 있다는 안내
    - 채팅 요청 시
        - 위치 권한 확인
        - 권한이 없는 경우 채팅방 생성 불가능 안내 토스트 메세지
        - 권한이 있는 경우 채팅방 생성 요청 → 범위 밖이면 토스트 메세지

![image.png](attachment:39938125-11ac-4a5a-9d6a-cde4047eb3ab:image.png)

### 4. 마케팅 (4)

- 개발 및 학습 목록
    1. SNS 계정 만들고 인스타에 띄우기 — 완전 가능 대신에 업로드할 내용 // 디자인
        
        → 운다방 계정으로 진행 (구글계정)
        
        → 쓰레드도 진행
        
    2. 지인들에게 소개하기 — 각자 가능
        1. 아파트 커뮤니티 헬스장 (상주하는 트레이너분한테 소개)
        2. 주변 지인(헬스장 사장) 홍보?
    3. 인터넷 커뮤니티 홍보 (각종 커뮤니티 가능)

### 5. 운동 기록 리팩토링(4)

- 개발 및 학습 목록
    - 운동 종류 선택 ui 추가 (선호 운동 종류 기반)
    - 장소 선택 ui 추가
        - 내 운동 장소 목록에서 선택
        - 다른 장소라면 지도에서 선택

### **[백업] 주 운동하는 지역 저장**

- 개발 및 학습 목록
    1. **주 운동하는 지역 저장** 
    - 백엔드
        - 회원의 현재 위치와 회원이 선택한 장소를 비교해서 반경 5KM내에 있으면 DB 저장, 아니면 오류 반환
            - DB 테이블 생성 [ERD 작성 및 엔티티 생성]
            - 생성 (현재위치랑 등록위치간의 비교가 필요함 좌표를 Java에서 처리 가능한지 확인해야함)
            - 삭제
            - 조회
    - 클라이언트
        - UI
            - 주 운동지역 생성, 삭제, 조회, (성공, 실패) 모달
        - 회원이 선택한 위치 정보 + 현재 위치 Response Body에 넣기
    - POST /api/v1/location/verify
    - **Body:** { "latitude": 37.xxx, "longitude": 127.xxx, “name”: “집” }
    - **Response:**
        - success: true/false
        - name: "집"
        - verifiedAt: Timestamp
